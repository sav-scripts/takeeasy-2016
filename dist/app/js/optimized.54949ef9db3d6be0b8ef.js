!function(){function a(a){console.log("statusChangeCallback"),console.log(a),"connected"===a.status?console.log("connected"):"not_authorized"===a.status?console.log("not authorized"):console.log("not login")}function b(a,b,c){this.api=a,this.apiParams=b,this.after=null,this.dataList=[],this.thereIsMore=!0,this.cbFetchComplete=c,this.lastFetchIndex=0}var c,d=window.FBHelper={},e=["public_profile"];d.uid=null,d.uname=null,d.init=function(b,d,e){"string"==typeof b&&(b={appId:b,cookie:!0,xfbml:!0,version:"v2.4"}),c=b.appId,window.fbAsyncInit=function(){FB.init(b),e&&FB.getLoginStatus(function(b){a(b)}),d&&d.apply()},function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/zh_TW/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")},d.login=function(a,b,c){a||(a=e),FB.login(function(a){a.authResponse?(d.uid=a.authResponse.userID,"connected"==a.status?null!=b&&b.apply(null,[a]):null!=c&&c.apply(null,[{action:"login",response:a,type:a.status,message:"not connected"}])):null!=c&&c.apply(null,[{action:"login",response:a,type:a.status,message:"user cancel login"}])},{scope:a})},d.getPublicProfile=function(a){FB.api("/me",function(b){d.uname=b.name,a.apply(null,[b])})},window.FBData=b,b.prototype.fetch=function(){var a=this;return a.thereIsMore||(console.log("warning: trying to fetch data where there is no more."),a.cbFetchComplete.call(a,a.dataList)),a.lastFetchIndex=a.dataList.length,FB.api(a.api,"GET",a.apiParams,function(b){b.error?console.error(b.error):(a.dataList=a.dataList.concat(b.data),a.apiParams.after=Boolean(b.paging&&b.paging.next)?b.paging.cursors.after:null,a.apiParams.after?a.thereIsMore=!0:(delete a.apiParams.after,a.thereIsMore=!1),a.cbFetchComplete.call(a,a.dataList))}),this}}(),function(){"use strict";function a(a){var b=parseInt(a);return isNaN(b)&&(b=0),b}var b=window.Helper={};b.getSize_cover=function(a,b,c,d){var e,f,g=a/b,h=c/d;h>g?(f=b,e=f*h):(e=a,f=e/h);var i=e/c,j=a/i,k=b/i,l={x:.5*(c-j),y:.5*(d-k),width:j,height:k};return{width:e,height:f,ratio:i,contentCenterBound:l}},b.getSize_contain=function(a,b,c,d){var e,f,g=a/b,h=c/d;return h>g?(e=a,f=e/h):(f=b,e=f*h),{width:e,height:f,ratio:e/c}},Helper.extract=function(a,b,c,d){null==d&&(d=0),null==b&&(b=document);var e=$(b).find(a).get(d);return e||console.error("can't find dom, selector: "+a+", source: "+b),Helper.getInitValue(e),null!=c&&c.appendChild(e),e},Helper.$extract=function(a,b,c,d){null==d&&(d=0),null==b&&(b=document);var e=$(b).find(a).get(d);return e||console.error("can't find dom, selector: "+a+", source: "+b),Helper.getInitValue(e),null!=c&&c.appendChild(e),$(e)},Helper.pxToPercent=function(b,c,d,e,f){function g(b,c,d){null==d&&(d=100);var e=Helper.styleDic[b];e||(e=b);var g=a(i.css(e)),h=g/c*d+"%";f?f[b]=h:0!=g&&i.css(e,h)}e||(e={w:!0,h:!1,l:!0,t:!1,r:!0,b:!1});var h,i=$(b);for(h in e){var j=1==e[h]?c:d;g(h,j)}},Helper.clearStyles=function(a){$(a).removeAttr("style")},Helper.getInitValue=function(b,c,d,e,f,g){b.init||(b.init={}),b.geom||(b.geom={}),f&&Helper.clearStyles(b);var h,i;if(g?(h=b.init[g]={},i=b.geom[g]={}):(h=b.init,i=b.geom),c||(b.currentStyle?(i.w=h.w=a(b.currentStyle.width),i.h=h.h=a(b.currentStyle.height),i.ml=h.ml=a(b.currentStyle.marginLeft),i.mt=h.mt=a(b.currentStyle.marginTop),i.mr=h.mr=a(b.currentStyle.marginRight),i.mb=h.mb=a(b.currentStyle.marginBottom),i.t=h.t=a(b.currentStyle.top),i.l=h.l=a(b.currentStyle.left),i.r=h.r=a(b.currentStyle.right),i.b=h.b=a(b.currentStyle.bottom)):(i.w=h.w=$(b).width(),i.h=h.h=$(b).height(),i.ml=h.ml=a($(b).css("margin-left")),i.mt=h.mt=a($(b).css("margin-top")),i.mr=h.mr=a($(b).css("margin-right")),i.mb=h.mb=a($(b).css("margin-bottom")),i.t=h.t=a($(b).css("top")),i.l=h.l=a($(b).css("left")),i.r=h.r=a($(b).css("right")),i.b=h.b=a($(b).css("bottom")))),i.scale=h.scale=1,d)for(var j=0;j<d.length;j++){var k=d[j];h[k]=i[k]=a($(b).css(k))}if(e){var l,m,n;l=e.width,m=e.height,n=e.styleDic,Helper.pxToPercent(b,l,m,n,h)}},Helper.styleDic={l:"left",r:"right",t:"top",b:"bottom",ml:"margin-left",mr:"margin-right",mt:"margin-top",mb:"margin-bottom",w:"width",h:"height"},Helper.applyTransform=function(a,b,c,d,e,f){var g,h;f?(g=a.init[f],h=a.geom[f]):(g=a.init,h=a.geom);var i,j,k,l,m=null!=b?g.scale*b:g.scale,n=$(a);if(c)for(j=c.length,i=0;i<j;i++)k=c[i],l=Helper.styleDic[k],l||(l=k),h[k]=g[k]*m,n.css(l,h[k]+"px");if(d)for(j=d.length,i=0;i<j;i++)k=d[i],l=Helper.styleDic[k],h[k]=g[k]*m,n.css(l,h[k]+"%");if(e)for(j=e.length,i=0;i<j;i++)k=e[i],l=Helper.styleDic[k],l||(l=k),n.css(l,g[k])},Helper.transformDom=function(a,b,c,d,e){var f=null!=b?a.init.scale*b:a.init.scale;0!=e&&(e===!0?(a.geom.w=a.init.w*f,a.geom.h=a.init.h*f,$(a).css("width",a.geom.w).css("height",a.geom.h)):(c.l&&(a.geom.l=a.init.l*f,$(a).css("left",a.geom.l)),c.t&&(a.geom.t=a.init.t*f,$(a).css("top",a.geom.t)))),0!=c&&(c===!0?(a.geom.t=a.init.t*f,a.geom.l=a.init.l*f,$(a).css("top",a.geom.t).css("left",a.geom.l)):(c.l&&(a.geom.l=a.init.l*f,$(a).css("left",a.geom.l)),c.t&&(a.geom.t=a.init.t*f,$(a).css("top",a.geom.t)),c.r&&(a.geom.r=a.init.r*f,$(a).css("right",a.geom.r)),c.b&&(a.geom.b=a.init.b*f,$(a).css("bottom",a.geom.b)))),0!=d&&(d===!0?(a.geom.mt=a.init.mt*f,a.geom.ml=a.init.ml*f,$(a).css("margin-top",a.geom.mt).css("margin-left",a.geom.ml)):(c.ml&&(a.geom.ml=a.init.ml*f,$(a).css("margin-left",a.geom.ml)),c.mt&&(a.geom.mt=a.init.mt*f,$(a).css("margin-top",a.geom.mt)),c.mr&&(a.geom.mr=a.init.mr*f,$(a).css("margin-right",a.geom.mr)),c.mb&&(a.geom.mb=a.init.mb*f,$(a).css("margin-bottom",a.geom.mb))))},Helper.downScaleImage=function(a,b,c,d,e,f){var g=document.createElement("canvas");g.width=a.width,g.height=a.height;var h=g.getContext("2d");return h.drawImage(a,0,0),Helper.downScaleCanvas(g,b,c,d,e,f)},Helper.downScaleCanvas=function(a,b,c,d,e,f){if(c||(c=0),d||(d=0),!(b<1&&b>0))throw"scale must be a positive number <1 ";var g=b*b,h=a.width,i=a.height,j=Math.floor(h*b),k=Math.floor(i*b),l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=!1,B=!1,C=a.getContext("2d").getImageData(0,0,h,i).data,D=new Float32Array(3*j*k),E=0,F=0,G=0;for(m=0;m<i;m++)for(p=m*b,t=0|p,q=3*t*j,B=t!=(0|p+b),B&&(y=t+1-p,z=p+b-t-1),l=0;l<h;l++,n+=4)o=l*b,s=0|o,r=q+3*s,A=s!=(0|o+b),A&&(w=s+1-o,x=o+b-s-1),E=C[n],F=C[n+1],G=C[n+2],A||B?A&&!B?(u=w*b,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=x*b,D[r+3]+=E*v,D[r+4]+=F*v,D[r+5]+=G*v):B&&!A?(u=y*b,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=z*b,D[r+3*j]+=E*v,D[r+3*j+1]+=F*v,D[r+3*j+2]+=G*v):(u=w*y,D[r]+=E*u,D[r+1]+=F*u,D[r+2]+=G*u,v=x*y,D[r+3]+=E*v,D[r+4]+=F*v,D[r+5]+=G*v,v=w*z,D[r+3*j]+=E*v,D[r+3*j+1]+=F*v,D[r+3*j+2]+=G*v,v=x*z,D[r+3*j+3]+=E*v,D[r+3*j+4]+=F*v,D[r+3*j+5]+=G*v):(D[r]+=E*g,D[r+1]+=F*g,D[r+2]+=G*g);var H=document.createElement("canvas");H.width=e?e:j,H.height=f?f:k;var I=H.getContext("2d"),J=I.getImageData(0,0,j,k),K=J.data,L=0;for(n=0,r=0;L<j*k;n+=3,r+=4,L++)K[r]=Math.ceil(D[n]),K[r+1]=Math.ceil(D[n+1]),K[r+2]=Math.ceil(D[n+2]),K[r+3]=255;return I.putImageData(J,c,d),H}}(),function(){function a(a){return g&&(a=g.call(null,a)),a}function b(){k=!1,null!=m&&(m.apply(),m=null),e&&e.apply()}var c,d,e,f,g,h,i=window.SceneHandler={},j={},k=!1,l=null,m=null,n=null,o="/Index",p=!1,q=!0,r={},s={};i.currentScene=null,i.processHashNames=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];_contentClasses.push(window[d]),b.push("/"+d)}return b},i.init=function(b,h){h=h||{},c=h.version||"0",d=h.cbBeforeChange,e=h.cbAfterChange,g=h.hashChangeTester,f=h.cbContentChange,n=h.cbContentLoaded,q=void 0===h.listeningHashChange||h.listeningHashChange;var l,o,p;if(h.blockHashs)for(l=0;l<h.blockHashs.length;l++)s[h.blockHashs[l]]=!0;for(l=0;l<b.length;l++)o=b[l],p={hash:o,index:l,stageClass:window[o.replace("/","")]},p.stageClass||console.error("class for: "+o+" is not exist"),j[o]=p;q&&i.onHashChange(function(b){""==b&&(b="/Index"),b=a(b),b&&j[b]&&!s[b]&&(k?m=function(){i.toContent(b)}:i.toContent(b))})},i.setLock=function(a){p=a},i.onHashChange=function(a){function b(){p||(h?h=!1:a.apply(null,[i.getHash()]))}if("onhashchange"in window)window.onhashchange=function(){b()};else{var c=window.location.hash;window.setInterval(function(){window.location.hash!=c&&(c=window.location.hash,b())},100)}},i.getHash=function(){return window.location.hash.replace("#","")},i.setHash=function(a,b){b&&(h=!0),window.location.hash="#"+a},i.toFirstHash=function(b){var c=i.getHash();q&&j[c]&&!s[c]||(c=o),c=a(c),c&&i.toContent(c,b)},i.toHash=function(a){a||(a=o),q&&i.getHash()!=a?i.setHash(a):i.toContent(a)},i.toContent=function(a,c){if(!k&&(""==a&&(a=o),l!=a)){var e,g;c||(c={}),c.firstIn=!1,c.cbContentLoaded=n,k=!0,f&&f.call(null,a),c.lastHash=l,null==l?(c.isFirstIn=!0,l=a,e=j[a],i.currentScene=e.stageClass,e.stageClass.stageIn(c,b)):j[l]&&j[a]&&(d&&d.apply(),g=j[l],e=j[a],i.currentScene=e.stageClass,l=a,g.stageClass.stageOut(c,function(){e.stageClass.stageIn(c,b)}))}},i.loadTemplate=function(a,b,d){function e(a){function f(){a++,a>=b.length?(Loading.hide(),d.apply(null)):e(a)}if(0==b.length)return Loading.hide(),void d.apply(null);null==a&&(a=0);var g,h=b[a].url;r[h]?(b[a].dom=r[h],f()):(Loading.progress(0),g=document.createElement("div"),$(g).load(b[a].url+"?v="+c,function(){r[h]=g;var c=b.extractClass;c||(c="extract-point");var d=b[a].dom=$(g).find("."+c)[0];$(d).toggleClass(c,!1),$("#invisible-container").append(d),$(d).waitForImages(function(){d.parentNode&&d.parentNode.removeChild(d),f()},function(a,b){var c=a/b;Loading.progress(c)},!0)}))}Loading.show(),null!=a?Utility.preloadImages(a.list,e,function(a){Loading.progress(a/100)}):e(0)}}(),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b="waitForImages";a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},a.expr[":"]["has-src"]=function(b){return a(b).is('img[src][src!=""]')},a.expr[":"].uncached=function(b){return!!a(b).is(":has-src")&&!b.complete},a.fn.waitForImages=function(){var c,d,e,f=0,g=0,h=a.Deferred();if(a.isPlainObject(arguments[0])?(e=arguments[0].waitForAll,d=arguments[0].each,c=arguments[0].finished):1===arguments.length&&"boolean"===a.type(arguments[0])?e=arguments[0]:(c=arguments[0],d=arguments[1],e=arguments[2]),c=c||a.noop,d=d||a.noop,e=!!e,!a.isFunction(c)||!a.isFunction(d))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var i=a(this),j=[],k=a.waitForImages.hasImageProperties||[],l=a.waitForImages.hasImageAttributes||[],m=/url\(\s*(['"]?)(.*?)\1\s*\)/g;e?i.find("*").addBack().each(function(){var b=a(this);b.is("img:has-src")&&j.push({src:b.attr("src"),element:b[0]}),a.each(k,function(a,c){var d,e=b.css(c);if(!e)return!0;for(;d=m.exec(e);)j.push({src:d[2],element:b[0]})}),a.each(l,function(c,d){var e,f=b.attr(d);return!f||(e=f.split(","),void a.each(e,function(c,d){d=a.trim(d).split(" ")[0],j.push({src:d,element:b[0]})}))})}):i.find("img:has-src").each(function(){j.push({src:this.src,element:this})}),f=j.length,g=0,0===f&&(c.call(i[0]),h.resolveWith(i[0])),a.each(j,function(e,j){var k=new Image,l="load."+b+" error."+b;a(k).one(l,function b(e){var k=[g,f,"load"==e.type];return g++,d.apply(j.element,k),h.notifyWith(j.element,k),a(this).off(l,b),g==f?(c.call(i[0]),h.resolveWith(i[0]),!1):void 0}),k.src=j.src})}),h.promise()}}),function(){window.Utility={};var a={},b={};b.log="log",b.warn="warn",b.error="error",b.debug="debug",b.info="info",Utility.setConsoleMethod=function(b,c){1==c?console[b]=a[b]:console[b]=function(){}},Utility.disableAllConsoleMethods=function(){for(var a in b)this.setConsoleMethod(a,!1)},Utility.enableAllConsoleMethods=function(){for(var a in b)this.setConsoleMethod(a,!0)},function(){if(!window.console){window.console={};for(var c in b)console[b[c]]=function(){}}for(var c in b)a[b[c]]=console[b[c]];window.Array.prototype.indexOf||(window.Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1})}();var c={};Utility.analyzeURL=function(a){if(!c[a]){var b=/^((http[s]?|ftp):\/)?\/?([^:\/\s]+)((\/\w+)*\/)([\w\-\.]+[^#?\s]+)(.*)?(#[\w\-]+)?$/;c[a]=a.match(b)}return c[a]},Utility.getPath=function(a){a||(a=window.location.href);var b=a.indexOf("?")==-1?a:a.substr(0,a.indexOf("?"));b.indexOf("#")!==-1&&(b=b.substr(0,b.indexOf("#")));var c=b.split("/"),d=c[c.length-1];for(d.indexOf(".")!==-1&&c.pop(),b=c.join("/");b.length&&"/"==b.charAt(b.length-1);)b=b.slice(0,b.length-1);return b+="/"},Utility.getProtocol=function(a){return a||(a=window.location.href),Utility.analyzeURL(a)[2]},Utility.urlParams=function(){var a=decodeURIComponent(window.location.href),b=a.split("?")[1];if(!b)return{};b=b.split("#")[0];for(var c={},d=b.split("&"),e=0;e<d.length;e++){var f=d[e].split("=");c[f[0]]=f[1]}return c}(),Utility.isLocalhost=function(){var a=window.location.toString().split("/")[2];return"localhost"==a||"192"==a.split(".")[0]}(),Utility.preloadImages=function(a,b,c,d){function e(){function g(){null!=i&&(i.collector[i.name]=j),j.onerror=null,j.onload=null,e()}if(c&&c.apply(null,[f/a.length*100<<0]),f>=a.length)return void(b&&b.apply());var h=a[f],i=null;"string"!=typeof h&&(i=h,h=i.url),f++;var j=new Image;j.onload=g,d&&(j.onerror=function(){console.error("load image error: ["+h+"]"),g()}),j.src=h}if(null==d&&(d=!0),!a||0==a.length)return void(b&&b.apply());var f=0;e()},Utility.shuffleArray=function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a}}(),function(){var a=window.PatternSamples={};a.email=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.phone=/^(09)[0-9]{8}$/,a.number=/[0-9]/g,a.nonNumber=/[^0-9]/g,a.onlySpace=/^\s*$/,a.localPhone=/^(0)\d{1,3}(-)\d{5,8}$/,a.personId=/^[A-Z]{1}[1-2]{1}[0-9]{8}$/}(),function(){"use strict";function a(){$(window).width(),$(window).height()}var b=window.Main={};b.init=function(){var b=["/Index","/Participate","/ParticipateForm"],c=[];SceneHandler.init(b,{blockHashs:c,listeningHashChange:!0,version:"1"==Utility.urlParams.nocache?(new Date).getTime():"0",cbBeforeChange:function(){},cbContentChange:function(a){},hashChangeTester:function(a){return a}}),SceneHandler.toFirstHash(),$(window).on("resize",a),a()}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),d.container=$("#index"),d.btnToParticipate=d.container.find(".button-1").on("click",function(){SceneHandler.toHash("/Participate")}),d.btnToEntries=d.container.find(".button-2").on("click",function(){}),d.container.detach()}function b(a){$("#scene-container").append(d.container);var b=new TimelineMax;b.set(d.container,{autoAlpha:0}),b.to(d.container,.4,{autoAlpha:1}),b.add(function(){a.apply()})}function c(a){var b=new TimelineMax;b.to(d.container,.4,{autoAlpha:0}),b.add(function(){d.container.detach(),a.apply()})}var d={},e=!1;window.Index={stageIn:function(c,d){function f(a){a&&c.cbContentLoaded&&c.cbContentLoaded.call(),b(d)}function g(b){var c=[{url:"_index.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),e=!0,b.apply(null,[!0])},0)}e?f():g(f)},stageOut:function(a,b){c(b)},resize:function(a,b,c){}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),d.container=$("#participate"),d.container.detach()}function b(a){$("#scene-container").append(d.container);var b=new TimelineMax;b.set(d.container,{autoAlpha:0}),b.to(d.container,.4,{autoAlpha:1}),b.add(function(){a.apply()})}function c(a){var b=new TimelineMax;b.to(d.container,.4,{autoAlpha:0}),b.add(function(){d.container.detach(),a.apply()})}var d={},e=!1;window.Participate={stageIn:function(c,d){function f(a){a&&c.cbContentLoaded&&c.cbContentLoaded.call(),b(d)}function g(b){var c=[{url:"_participate.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),e=!0,b.apply(null)},0)}e?f():g(f)},stageOut:function(a,b){c(b)},resize:function(a,b,c){}}}(),function(){function a(a){$("#invisible-container").append(a[0].dom),d.container=$("#participate-form"),d.container.detach()}function b(a){$("#scene-container").append(d.container);var b=new TimelineMax;b.set(d.container,{autoAlpha:0}),b.to(d.container,.4,{autoAlpha:1}),b.add(function(){a.apply()})}function c(a){var b=new TimelineMax;b.to(d.container,.4,{autoAlpha:0}),b.add(function(){d.container.detach(),a.apply()})}var d={},e=!1;window.ParticipateForm={stageIn:function(c,d){function f(a){a&&c.cbContentLoaded&&c.cbContentLoaded.call(),b(d)}function g(b){var c=[{url:"_participate.html",startWeight:0,weight:100,dom:null}];SceneHandler.loadTemplate(null,c,function(){a(c),e=!0,b.apply(null)},0)}e?f():g(f)},stageOut:function(a,b){c(b)},resize:function(a,b,c){}}}();